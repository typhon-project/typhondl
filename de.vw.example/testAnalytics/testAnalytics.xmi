<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:typhonDL="http://www.typhon.org/dsls/xtext/TyphonDL">
  <typhonDL:DeploymentModel>
    <guiMetaInformation xsi:type="typhonDL:Import" relativePath="weather_warning_ML.xmi"/>
    <guiMetaInformation xsi:type="typhonDL:Import" relativePath="TextWarningData.tdl"/>
    <guiMetaInformation xsi:type="typhonDL:Import" relativePath="AppData.tdl"/>
    <elements xsi:type="typhonDL:PlatformType" name="default"/>
    <elements xsi:type="typhonDL:ContainerType" name="Docker"/>
    <elements xsi:type="typhonDL:Platform" name="platformName" type="/0/@elements.0">
      <clusters name="clusterName">
        <networks name="typhon"/>
        <applications name="Polystore">
          <containers name="polystore_api" type="/0/@elements.1">
            <deploys reference="/2/@elements.0"/>
            <depends_on reference="/0/@elements.2/@clusters.0/@applications.0/@containers.2"/>
            <properties xsi:type="typhonDL:Key_Values" name="container_name" value="typhonml.polystore.service"/>
            <properties xsi:type="typhonDL:Key_ValueArray" name="ports">
              <values>8080:8080</values>
            </properties>
            <properties xsi:type="typhonDL:Key_ValueArray" name="volumes">
              <values>./models:/models</values>
            </properties>
          </containers>
          <containers name="polystore_ui" type="/0/@elements.1">
            <deploys reference="/1/@elements.0"/>
            <depends_on reference="/0/@elements.2/@clusters.0/@applications.0/@containers.0"/>
            <properties xsi:type="typhonDL:Key_Values" name="container_name" value="polystore.ui"/>
            <properties xsi:type="typhonDL:Key_ValueArray" name="ports">
              <values>4200:4200</values>
            </properties>
          </containers>
          <containers name="polystoredb" type="/0/@elements.1">
            <deploys reference="/3/@elements.1"/>
            <properties xsi:type="typhonDL:Key_Values" name="container_name" value="polystore.mongo"/>
            <properties xsi:type="typhonDL:Key_ValueArray" name="ports">
              <values>27017:27017</values>
            </properties>
          </containers>
          <containers name="zookeeper" type="/0/@elements.1">
            <deploys reference="/6/@elements.0"/>
            <networks references="/0/@elements.2/@clusters.0/@networks.0"/>
            <properties xsi:type="typhonDL:Key_Values" name="container_name" value="zookeeper"/>
            <properties xsi:type="typhonDL:Key_ValueArray" name="ports">
              <values>2181:2181</values>
            </properties>
          </containers>
          <containers name="kafka" type="/0/@elements.1">
            <depends_on reference="/0/@elements.2/@clusters.0/@applications.0/@containers.3"/>
            <networks references="/0/@elements.2/@clusters.0/@networks.0"/>
            <properties xsi:type="typhonDL:Key_Values" name="build" value="."/>
            <properties xsi:type="typhonDL:Key_Values" name="container_name" value="kafka"/>
            <properties xsi:type="typhonDL:Key_ValueArray" name="ports">
              <values>9092:9092</values>
            </properties>
            <properties xsi:type="typhonDL:Key_ValueArray" name="volumes">
              <values>/var/run/docker.sock:/var/run/docker.sock</values>
            </properties>
            <properties xsi:type="typhonDL:Key_KeyValueList" name="environment">
              <key_Values name="KAFKA_ZOOKEEPER_CONNECT" value="zookeeper:2181"/>
              <key_Values name="KAFKA_ADVERTISED_HOST_NAME" value="kafka"/>
              <key_Values name="KAFKA_LISTENERS" value="PLAINTEXT://:29092">
                <values>PLAINTEXT://:29093</values>
                <values>PLAINTEXT_HOST://:9092</values>
              </key_Values>
              <key_Values name="KAFKA_LISTENER_SECURITY_PROTOCOL_MAP" value="PLAINTEXT:PLAINTEXT">
                <values>PLAINTEXT_HOST:PLAINTEXT</values>
              </key_Values>
              <key_Values name="KAFKA_INTER_BROKER_LISTENER_NAME" value="PLAINTEXT"/>
              <key_Values name="KAFKA_ADVERTISED_LISTENERS" value="PLAINTEXT://kafka:29092">
                <values>PLAINTEXT://kafka:29093</values>
                <values>PLAINTEXT_HOST://localhost:9092</values>
              </key_Values>
              <key_Values name="KAFKA_AUTO_CREATE_TOPICS_ENABLE" value="&quot;true&quot;"/>
            </properties>
          </containers>
          <containers name="TextWarningData" type="/0/@elements.1">
            <deploys reference="/4/@elements.1"/>
            <properties xsi:type="typhonDL:Key_ValueArray" name="ports">
              <values>27018:27017</values>
            </properties>
          </containers>
          <containers name="AppData" type="/0/@elements.1">
            <deploys reference="/5/@elements.1"/>
            <properties xsi:type="typhonDL:Key_ValueArray" name="ports">
              <values>3306:3306</values>
            </properties>
          </containers>
        </applications>
      </clusters>
    </elements>
  </typhonDL:DeploymentModel>
  <typhonDL:DeploymentModel>
    <elements xsi:type="typhonDL:NonDB" name="polystore_ui">
      <image value="clms/typhon-polystore-ui:latest"/>
      <parameters xsi:type="typhonDL:Key_Values" name="restart" value="always"/>
      <parameters xsi:type="typhonDL:Key_Values" name="hostname" value="polystore_ui"/>
    </elements>
  </typhonDL:DeploymentModel>
  <typhonDL:DeploymentModel>
    <elements xsi:type="typhonDL:NonDB" name="polystore_api">
      <image value="clms/typhon-polystore-api:latest"/>
      <parameters xsi:type="typhonDL:Key_Values" name="restart" value="always"/>
      <parameters xsi:type="typhonDL:Key_Values" name="hostname" value="polystore_api"/>
    </elements>
  </typhonDL:DeploymentModel>
  <typhonDL:DeploymentModel>
    <elements xsi:type="typhonDL:DBType" name="mongo"/>
    <elements xsi:type="typhonDL:DB" name="polystoredb" type="/3/@elements.0">
      <image value="mongo:latest"/>
      <parameters xsi:type="typhonDL:Key_KeyValueList" name="environment">
        <key_Values name="MONGO_INITDB_ROOT_USERNAME" value="admin"/>
        <key_Values name="MONGO_INITDB_ROOT_PASSWORD" value="admin"/>
      </parameters>
    </elements>
  </typhonDL:DeploymentModel>
  <typhonDL:DeploymentModel>
    <elements xsi:type="typhonDL:DBType" name="mongo"/>
    <elements xsi:type="typhonDL:DB" name="TextWarningData" type="/4/@elements.0">
      <image value="mongo:latest"/>
      <parameters xsi:type="typhonDL:Key_KeyValueList" name="environment">
        <key_Values name="MONGO_INITDB_ROOT_USERNAME" value="admin"/>
        <key_Values name="MONGO_INITDB_ROOT_PASSWORD" value="admin"/>
      </parameters>
    </elements>
  </typhonDL:DeploymentModel>
  <typhonDL:DeploymentModel>
    <elements xsi:type="typhonDL:DBType" name="mysql"/>
    <elements xsi:type="typhonDL:DB" name="AppData" type="/5/@elements.0">
      <image value="mysql:latest"/>
      <parameters xsi:type="typhonDL:Key_Values" name="command" value="--default-authentication-plugin=mysql_native_password"/>
      <parameters xsi:type="typhonDL:Key_KeyValueList" name="environment">
        <key_Values name="MYSQL_ROOT_PASSWORD" value="example"/>
      </parameters>
    </elements>
  </typhonDL:DeploymentModel>
  <typhonDL:DeploymentModel>
    <elements xsi:type="typhonDL:NonDB" name="zookeeper">
      <image value="wurstmeister/zookeeper"/>
    </elements>
  </typhonDL:DeploymentModel>
</xmi:XMI>
