<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:typhonDL="http://www.typhon.org/dsls/xtext/TyphonDL">
  <typhonDL:DeploymentModel>
    <guiMetaInformation xsi:type="typhonDL:Import" relativePath="polystore_api.tdl"/>
    <guiMetaInformation xsi:type="typhonDL:Import" relativePath="polystoredb.tdl"/>
    <guiMetaInformation xsi:type="typhonDL:Import" relativePath="mariadbtest.tdl"/>
    <elements xsi:type="typhonDL:PlatformType" name="default"/>
    <elements xsi:type="typhonDL:ContainerType" name="Docker"/>
    <elements xsi:type="typhonDL:Deployment" name="platformname" type="/0/@elements.0">
      <clusters name="clustername">
        <applications name="Polystore">
          <containers name="polystore" type="/0/@elements.1">
            <deploys reference="/1/@elements.0"/>
            <depends_on reference="/0/@elements.2/@clusters.0/@applications.0/@containers.2"/>
            <properties xsi:type="typhonDL:Key_Value" name="container_name" value="typhonml.polystore.service"/>
            <properties xsi:type="typhonDL:Key_Value" name="ports" value="8080:8080"/>
            <properties xsi:type="typhonDL:Key_Value" name="volumes" value="./models:/models"/>
          </containers>
          <containers name="polystoreui" type="/0/@elements.1">
            <properties xsi:type="typhonDL:Key_KeyValueList" name="build">
              <key_Values name="context" value="Typhon Service UI"/>
            </properties>
            <properties xsi:type="typhonDL:Key_Value" name="container_name" value="polystore.ui"/>
            <properties xsi:type="typhonDL:Key_Value" name="ports" value="4200:4200"/>
          </containers>
          <containers name="polystoredb" type="/0/@elements.1">
            <deploys reference="/2/@elements.1"/>
            <properties xsi:type="typhonDL:Key_Value" name="container_name" value="polystore.mongo"/>
            <properties xsi:type="typhonDL:Key_Value" name="ports" value="27017:27017"/>
          </containers>
          <containers name="mariadbtest" type="/0/@elements.1">
            <deploys reference="/3/@elements.1"/>
            <properties xsi:type="typhonDL:Key_Value" name="hostname" value="test.mariadb"/>
            <properties xsi:type="typhonDL:Key_Value" name="container_name" value="test.mariadb"/>
            <properties xsi:type="typhonDL:Key_Value" name="ports" value="3306:3306"/>
          </containers>
        </applications>
      </clusters>
    </elements>
  </typhonDL:DeploymentModel>
  <typhonDL:DeploymentModel>
    <elements xsi:type="typhonDL:NonDB" name="polystore_api">
      <image value="clms/typhon-polystore-api:latest"/>
      <parameters xsi:type="typhonDL:Key_KeyValueList" name="build">
        <key_Values name="dockerfile" value="Dockerfile"/>
        <key_Values name="context" value="."/>
      </parameters>
      <parameters xsi:type="typhonDL:Key_Value" name="restart" value="always"/>
      <parameters xsi:type="typhonDL:Key_Value" name="hostname" value="polystore.api"/>
    </elements>
  </typhonDL:DeploymentModel>
  <typhonDL:DeploymentModel>
    <elements xsi:type="typhonDL:DBType" name="mongo"/>
    <elements xsi:type="typhonDL:DB" name="polystoredb" type="/2/@elements.0">
      <image value="mongo:latest"/>
      <parameters xsi:type="typhonDL:Key_Value" name="hostname" value="polystore.api.db"/>
      <parameters xsi:type="typhonDL:Key_KeyValueList" name="environment">
        <key_Values name="MONGO_INITDB_ROOT_USERNAME" value="admin"/>
        <key_Values name="MONGO_INITDB_ROOT_PASSWORD" value="admin"/>
      </parameters>
    </elements>
  </typhonDL:DeploymentModel>
  <typhonDL:DeploymentModel>
    <elements xsi:type="typhonDL:DBType" name="mariabd"/>
    <elements xsi:type="typhonDL:DB" name="mariadbtest" type="/3/@elements.0">
      <image value="mariadb:latest"/>
      <parameters xsi:type="typhonDL:Key_KeyValueList" name="environment">
        <key_Values name="MYSQL_ROOT_PASSWORD" value="admin"/>
      </parameters>
    </elements>
  </typhonDL:DeploymentModel>
</xmi:XMI>
