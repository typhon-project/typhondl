datatype Date
datatype String
datatype Double
datatype Color
datatype int
datatype Blob

customdatatype position {
	elements {
		longitude : Double ['it.univaq.disim.Double'],
		latitute : Double ['it.univaq.disim.Double']
	}
}

customdatatype timeRange {
	elements {
		begin : Date ['it.univaq.disim.Date'],
		end : Date ['it.univaq.disim.Date']
	}
}

customdatatype polygon {
	elements {
		position_one : position ['de.vw.typhon.position'],
		position_two : position ['de.vw.typhon.position']
	}
}

entity App {
	timeStamp : Date
	vehicle_id : String
	vehicle_position : position
	warnings :-> Warning[0..*]
	
}

entity Warning {
	time : timeRange
	warning_id : String
	warningType : String
	severity : int
	area : polygon
}

entity TextWarning {
	timeStamp : Date
	textWarning_id : String
	text : Blob
	freetext Meteosafe [RelationExtraction, TermExtraction]
}

relationaldb AppData {
	tables {
		table {
			AppDB : App 
			index appIndex {
				attributes ("App.vehicle_id")
			}
		}
		table {
			WarningDB : Warning
			index warningIndex {
				attributes ("Warning.warning_id")
			}
		}
	}
}

documentdb TextWarningData {
	collections {
		TextWarningDB : TextWarning
	}
}